{
  "version": 3,
  "file": "browser-panel.js",
  "sources": [
    "../../../../node_modules/.pnpm/lucide-react@0.518.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/arrow-left.js",
    "../../../../node_modules/.pnpm/lucide-react@0.518.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/chevrons-left.js",
    "../../../../node_modules/.pnpm/lucide-react@0.518.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/chevrons-right.js",
    "../../../../node_modules/.pnpm/lucide-react@0.518.0_react@18.3.1/node_modules/lucide-react/dist/esm/icons/external-link.js",
    "../../../../webview-ui/src/components/chat/BrowserSessionRow.tsx",
    "../../../../webview-ui/src/components/browser-session/BrowserPanelStateProvider.tsx",
    "../../../../webview-ui/src/components/browser-session/BrowserSessionPanel.tsx",
    "../../../../webview-ui/src/browser-panel.tsx"
  ],
  "sourcesContent": [
    "/**\n * @license lucide-react v0.518.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n",
    "/**\n * @license lucide-react v0.518.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m11 17-5-5 5-5\", key: \"13zhaf\" }],\n  [\"path\", { d: \"m18 17-5-5 5-5\", key: \"h8a8et\" }]\n];\nconst ChevronsLeft = createLucideIcon(\"chevrons-left\", __iconNode);\n\nexport { __iconNode, ChevronsLeft as default };\n//# sourceMappingURL=chevrons-left.js.map\n",
    "/**\n * @license lucide-react v0.518.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m6 17 5-5-5-5\", key: \"xnjwq\" }],\n  [\"path\", { d: \"m13 17 5-5-5-5\", key: \"17xmmf\" }]\n];\nconst ChevronsRight = createLucideIcon(\"chevrons-right\", __iconNode);\n\nexport { __iconNode, ChevronsRight as default };\n//# sourceMappingURL=chevrons-right.js.map\n",
    "/**\n * @license lucide-react v0.518.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 3h6v6\", key: \"1q9fwt\" }],\n  [\"path\", { d: \"M10 14 21 3\", key: \"gplh6r\" }],\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }]\n];\nconst ExternalLink = createLucideIcon(\"external-link\", __iconNode);\n\nexport { __iconNode, ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n",
    "import React, { memo, useEffect, useMemo, useRef, useState } from \"react\"\r\nimport deepEqual from \"fast-deep-equal\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport type { TFunction } from \"i18next\"\r\nimport type { ClineMessage } from \"@roo-code/types\"\r\n\r\nimport { BrowserAction, BrowserActionResult, ClineSayBrowserAction } from \"@roo/ExtensionMessage\"\r\n\r\nimport { vscode } from \"@src/utils/vscode\"\r\nimport { useExtensionState } from \"@src/context/ExtensionStateContext\"\r\n\r\nimport CodeBlock from \"../kilocode/common/CodeBlock\" // kilocode_change\r\nimport { ProgressIndicator } from \"./ProgressIndicator\"\r\nimport { Button, StandardTooltip } from \"@src/components/ui\"\r\nimport { getViewportCoordinate as getViewportCoordinateShared, prettyKey } from \"@roo/browserUtils\"\r\nimport {\r\n\tGlobe,\r\n\tPointer,\r\n\tSquareTerminal,\r\n\tMousePointer as MousePointerIcon,\r\n\tKeyboard,\r\n\tArrowDown,\r\n\tArrowUp,\r\n\tPlay,\r\n\tCheck,\r\n\tMaximize2,\r\n\tOctagonX,\r\n\tArrowLeft,\r\n\tArrowRight,\r\n\tChevronsLeft,\r\n\tChevronsRight,\r\n\tExternalLink,\r\n\tCopy,\r\n\tCamera,\r\n} from \"lucide-react\"\r\n\r\nconst getBrowserActionText = (\r\n\tt: TFunction,\r\n\taction: BrowserAction,\r\n\texecutedCoordinate?: string,\r\n\tcoordinate?: string,\r\n\ttext?: string,\r\n\tsize?: string,\r\n\tviewportWidth?: number,\r\n\tviewportHeight?: number,\r\n) => {\r\n\t// Helper to scale coordinates from screenshot dimensions to viewport dimensions\r\n\t// Matches the backend's scaleCoordinate function logic\r\n\tconst getViewportCoordinate = (coord?: string): string =>\r\n\t\tgetViewportCoordinateShared(coord, viewportWidth ?? 0, viewportHeight ?? 0)\r\n\r\n\tswitch (action) {\r\n\t\tcase \"launch\":\r\n\t\t\treturn t(\"chat:browser.actions.launched\")\r\n\t\tcase \"click\":\r\n\t\t\treturn t(\"chat:browser.actions.clicked\", {\r\n\t\t\t\tcoordinate: executedCoordinate || getViewportCoordinate(coordinate),\r\n\t\t\t})\r\n\t\tcase \"type\":\r\n\t\t\treturn t(\"chat:browser.actions.typed\", { text })\r\n\t\tcase \"press\":\r\n\t\t\treturn t(\"chat:browser.actions.pressed\", { key: prettyKey(text) })\r\n\t\tcase \"scroll_down\":\r\n\t\t\treturn t(\"chat:browser.actions.scrolledDown\")\r\n\t\tcase \"scroll_up\":\r\n\t\t\treturn t(\"chat:browser.actions.scrolledUp\")\r\n\t\tcase \"hover\":\r\n\t\t\treturn t(\"chat:browser.actions.hovered\", {\r\n\t\t\t\tcoordinate: executedCoordinate || getViewportCoordinate(coordinate),\r\n\t\t\t})\r\n\t\tcase \"resize\":\r\n\t\t\treturn t(\"chat:browser.actions.resized\", { size: size?.split(/[x,]/).join(\" x \") })\r\n\t\tcase \"screenshot\":\r\n\t\t\treturn t(\"chat:browser.actions.screenshotSaved\")\r\n\t\tcase \"close\":\r\n\t\t\treturn t(\"chat:browser.actions.closed\")\r\n\t\tdefault:\r\n\t\t\treturn action\r\n\t}\r\n}\r\n\r\nconst getActionIcon = (action: BrowserAction) => {\r\n\tswitch (action) {\r\n\t\tcase \"click\":\r\n\t\t\treturn <MousePointerIcon className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"type\":\r\n\t\tcase \"press\":\r\n\t\t\treturn <Keyboard className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"scroll_down\":\r\n\t\t\treturn <ArrowDown className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"scroll_up\":\r\n\t\t\treturn <ArrowUp className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"launch\":\r\n\t\t\treturn <Play className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"close\":\r\n\t\t\treturn <Check className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"resize\":\r\n\t\t\treturn <Maximize2 className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"screenshot\":\r\n\t\t\treturn <Camera className=\"w-4 h-4 opacity-80\" />\r\n\t\tcase \"hover\":\r\n\t\tdefault:\r\n\t\t\treturn <Pointer className=\"w-4 h-4 opacity-80\" />\r\n\t}\r\n}\r\n\r\ninterface BrowserSessionRowProps {\r\n\tmessages: ClineMessage[]\r\n\tisExpanded: (messageTs: number) => boolean\r\n\tonToggleExpand: (messageTs: number) => void\r\n\tlastModifiedMessage?: ClineMessage\r\n\tisLast: boolean\r\n\tonHeightChange?: (isTaller: boolean) => void\r\n\tisStreaming: boolean\r\n\tonExpandChange?: (expanded: boolean) => void\r\n\tfullScreen?: boolean\r\n\t// Optional props for standalone panel (when not using ExtensionStateContext)\r\n\tbrowserViewportSizeProp?: string\r\n\tisBrowserSessionActiveProp?: boolean\r\n\t// Optional: navigate to a specific page index (used by Browser Session panel)\r\n\tnavigateToPageIndex?: number\r\n}\r\n\r\nconst BrowserSessionRow = memo((props: BrowserSessionRowProps) => {\r\n\tconst { messages, isLast, onHeightChange, lastModifiedMessage, onExpandChange, fullScreen } = props\r\n\tconst { t } = useTranslation()\r\n\tconst prevHeightRef = useRef(0)\r\n\tconst [consoleLogsExpanded, setConsoleLogsExpanded] = useState(false)\r\n\tconst [nextActionsExpanded, setNextActionsExpanded] = useState(false)\r\n\tconst [logFilter, setLogFilter] = useState<\"all\" | \"debug\" | \"info\" | \"warn\" | \"error\" | \"log\">(\"all\")\r\n\t// Track screenshot container size for precise cursor positioning with object-fit: contain\r\n\tconst screenshotRef = useRef<HTMLDivElement>(null)\r\n\tconst [sW, setSW] = useState(0)\r\n\tconst [sH, setSH] = useState(0)\r\n\r\n\t// Auto-expand drawer when in fullScreen takeover mode so content is visible immediately\r\n\tuseEffect(() => {\r\n\t\tif (fullScreen) {\r\n\t\t\tsetNextActionsExpanded(true)\r\n\t\t}\r\n\t}, [fullScreen])\r\n\r\n\t// Observe screenshot container size to align cursor correctly with letterboxing\r\n\tuseEffect(() => {\r\n\t\tconst el = screenshotRef.current\r\n\t\tif (!el) return\r\n\t\tconst update = () => {\r\n\t\t\tconst r = el.getBoundingClientRect()\r\n\t\t\tsetSW(r.width)\r\n\t\t\tsetSH(r.height)\r\n\t\t}\r\n\t\tupdate()\r\n\t\tconst ro =\r\n\t\t\ttypeof window !== \"undefined\" && \"ResizeObserver\" in window ? new ResizeObserver(() => update()) : null\r\n\t\tif (ro) ro.observe(el)\r\n\t\treturn () => {\r\n\t\t\tif (ro) ro.disconnect()\r\n\t\t}\r\n\t}, [])\r\n\r\n\t// Try to use ExtensionStateContext if available, otherwise use props\r\n\tlet browserViewportSize = props.browserViewportSizeProp || \"900x600\"\r\n\tlet isBrowserSessionActive = props.isBrowserSessionActiveProp || false\r\n\r\n\ttry {\r\n\t\tconst extensionState = useExtensionState()\r\n\t\tbrowserViewportSize = extensionState.browserViewportSize || \"900x600\"\r\n\t\tisBrowserSessionActive = extensionState.isBrowserSessionActive || false\r\n\t} catch (_e) {\r\n\t\t// Not in ExtensionStateContext, use props\r\n\t}\r\n\r\n\tconst [viewportWidth, viewportHeight] = browserViewportSize.split(\"x\").map(Number)\r\n\tconst defaultMousePosition = `${Math.round(viewportWidth / 2)},${Math.round(viewportHeight / 2)}`\r\n\r\n\tconst isLastApiReqInterrupted = useMemo(() => {\r\n\t\t// Check if last api_req_started is cancelled\r\n\t\tconst lastApiReqStarted = [...messages].reverse().find((m) => m.say === \"api_req_started\")\r\n\t\tif (lastApiReqStarted?.text) {\r\n\t\t\tconst info = JSON.parse(lastApiReqStarted.text) as { cancelReason: string | null }\r\n\t\t\tif (info && info.cancelReason !== null) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst lastApiReqFailed = isLast && lastModifiedMessage?.ask === \"api_req_failed\"\r\n\t\tif (lastApiReqFailed) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false\r\n\t}, [messages, lastModifiedMessage, isLast])\r\n\r\n\tconst isBrowsing = useMemo(() => {\r\n\t\treturn isLast && messages.some((m) => m.say === \"browser_action_result\") && !isLastApiReqInterrupted // after user approves, browser_action_result with \"\" is sent to indicate that the session has started\r\n\t}, [isLast, messages, isLastApiReqInterrupted])\r\n\r\n\t// Organize messages into pages based on ALL browser actions (including those without screenshots)\r\n\tconst pages = useMemo(() => {\r\n\t\tconst result: {\r\n\t\t\turl?: string\r\n\t\t\tscreenshot?: string\r\n\t\t\tmousePosition?: string\r\n\t\t\tconsoleLogs?: string\r\n\t\t\taction?: ClineSayBrowserAction\r\n\t\t\tsize?: string\r\n\t\t\tviewportWidth?: number\r\n\t\t\tviewportHeight?: number\r\n\t\t}[] = []\r\n\r\n\t\t// Build pages from browser_action messages and pair with results\r\n\t\tmessages.forEach((message) => {\r\n\t\t\tif (message.say === \"browser_action\") {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst action = JSON.parse(message.text || \"{}\") as ClineSayBrowserAction\r\n\t\t\t\t\t// Find the corresponding result message\r\n\t\t\t\t\tconst resultMessage = messages.find(\r\n\t\t\t\t\t\t(m) => m.say === \"browser_action_result\" && m.ts > message.ts && m.text !== \"\",\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t\tif (resultMessage) {\r\n\t\t\t\t\t\tconst resultData = JSON.parse(resultMessage.text || \"{}\") as BrowserActionResult\r\n\t\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\t\turl: resultData.currentUrl,\r\n\t\t\t\t\t\t\tscreenshot: resultData.screenshot,\r\n\t\t\t\t\t\t\tmousePosition: resultData.currentMousePosition,\r\n\t\t\t\t\t\t\tconsoleLogs: resultData.logs,\r\n\t\t\t\t\t\t\taction,\r\n\t\t\t\t\t\t\tsize: action.size,\r\n\t\t\t\t\t\t\tviewportWidth: resultData.viewportWidth,\r\n\t\t\t\t\t\t\tviewportHeight: resultData.viewportHeight,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// For actions without results (like close), add a page without screenshot\r\n\t\t\t\t\t\tresult.push({ action, size: action.size })\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch {\r\n\t\t\t\t\t// ignore parse errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// Add placeholder page if no actions yet\r\n\t\tif (result.length === 0) {\r\n\t\t\tresult.push({})\r\n\t\t}\r\n\r\n\t\treturn result\r\n\t}, [messages])\r\n\r\n\t// Page index + user navigation guard (don't auto-jump while exploring history)\r\n\tconst [currentPageIndex, setCurrentPageIndex] = useState(0)\r\n\tconst hasUserNavigatedRef = useRef(false)\r\n\tconst didInitIndexRef = useRef(false)\r\n\tconst prevPagesLengthRef = useRef(0)\r\n\r\n\tuseEffect(() => {\r\n\t\t// Initialize to last page on mount\r\n\t\tif (!didInitIndexRef.current && pages.length > 0) {\r\n\t\t\tdidInitIndexRef.current = true\r\n\t\t\tsetCurrentPageIndex(pages.length - 1)\r\n\t\t\tprevPagesLengthRef.current = pages.length\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Auto-advance if user is on the most recent step and a new step arrives\r\n\t\tif (pages.length > prevPagesLengthRef.current) {\r\n\t\t\tconst wasOnLastPage = currentPageIndex === prevPagesLengthRef.current - 1\r\n\t\t\tif (wasOnLastPage && !hasUserNavigatedRef.current) {\r\n\t\t\t\t// User was on the most recent step, auto-advance to the new step\r\n\t\t\t\tsetCurrentPageIndex(pages.length - 1)\r\n\t\t\t}\r\n\t\t\tprevPagesLengthRef.current = pages.length\r\n\t\t}\r\n\t}, [pages.length, currentPageIndex])\r\n\r\n\t// External navigation request (from panel host)\r\n\t// Only navigate when navigateToPageIndex actually changes, not when pages.length changes\r\n\tconst prevNavigateToPageIndexRef = useRef<number | undefined>()\r\n\tuseEffect(() => {\r\n\t\tif (\r\n\t\t\ttypeof props.navigateToPageIndex === \"number\" &&\r\n\t\t\tprops.navigateToPageIndex !== prevNavigateToPageIndexRef.current &&\r\n\t\t\tpages.length > 0\r\n\t\t) {\r\n\t\t\tconst idx = Math.max(0, Math.min(pages.length - 1, props.navigateToPageIndex))\r\n\t\t\tsetCurrentPageIndex(idx)\r\n\t\t\t// Only reset manual navigation guard if navigating to the last page\r\n\t\t\t// This allows auto-advance to work when clicking to the most recent step\r\n\t\t\t// but prevents unwanted auto-advance when viewing historical steps\r\n\t\t\tif (idx === pages.length - 1) {\r\n\t\t\t\thasUserNavigatedRef.current = false\r\n\t\t\t}\r\n\t\t\tprevNavigateToPageIndexRef.current = props.navigateToPageIndex\r\n\t\t}\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [props.navigateToPageIndex])\r\n\r\n\t// Get initial URL from launch message\r\n\tconst initialUrl = useMemo(() => {\r\n\t\tconst launchMessage = messages.find((m) => m.ask === \"browser_action_launch\")\r\n\t\treturn launchMessage?.text || \"\"\r\n\t}, [messages])\r\n\r\n\tconst currentPage = pages[currentPageIndex]\r\n\r\n\t// Use actual viewport dimensions from result if available, otherwise fall back to settings\r\n\r\n\t// Find the last available screenshot and its associated data to use as placeholders\r\n\tconst lastPageWithScreenshot = useMemo(() => {\r\n\t\tfor (let i = pages.length - 1; i >= 0; i--) {\r\n\t\t\tif (pages[i].screenshot) {\r\n\t\t\t\treturn pages[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined\r\n\t}, [pages])\r\n\r\n\t// Find last mouse position up to current page (not from future pages)\r\n\tconst lastPageWithMousePositionUpToCurrent = useMemo(() => {\r\n\t\tfor (let i = currentPageIndex; i >= 0; i--) {\r\n\t\t\tif (pages[i].mousePosition) {\r\n\t\t\t\treturn pages[i]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn undefined\r\n\t}, [pages, currentPageIndex])\r\n\r\n\t// Display state from current page, with smart fallbacks\r\n\tconst displayState = {\r\n\t\turl: currentPage?.url || initialUrl,\r\n\t\tmousePosition:\r\n\t\t\tcurrentPage?.mousePosition || lastPageWithMousePositionUpToCurrent?.mousePosition || defaultMousePosition,\r\n\t\tconsoleLogs: currentPage?.consoleLogs,\r\n\t\tscreenshot: currentPage?.screenshot || lastPageWithScreenshot?.screenshot,\r\n\t}\r\n\r\n\t// Parse logs for counts and filtering\r\n\tconst parsedLogs = useMemo(() => {\r\n\t\tconst counts = { debug: 0, info: 0, warn: 0, error: 0, log: 0 }\r\n\t\tconst byType: Record<\"debug\" | \"info\" | \"warn\" | \"error\" | \"log\", string[]> = {\r\n\t\t\tdebug: [],\r\n\t\t\tinfo: [],\r\n\t\t\twarn: [],\r\n\t\t\terror: [],\r\n\t\t\tlog: [],\r\n\t\t}\r\n\t\tconst raw = displayState.consoleLogs || \"\"\r\n\t\traw.split(/\\r?\\n/).forEach((line) => {\r\n\t\t\tconst trimmed = line.trim()\r\n\t\t\tif (!trimmed) return\r\n\t\t\tconst m = /^\\[([^\\]]+)\\]\\s*/i.exec(trimmed)\r\n\t\t\tlet type = (m?.[1] || \"\").toLowerCase()\r\n\t\t\tif (type === \"warning\") type = \"warn\"\r\n\t\t\tif (![\"debug\", \"info\", \"warn\", \"error\", \"log\"].includes(type)) type = \"log\"\r\n\t\t\tcounts[type as keyof typeof counts]++\r\n\t\t\tbyType[type as keyof typeof byType].push(line)\r\n\t\t})\r\n\t\treturn { counts, byType }\r\n\t}, [displayState.consoleLogs])\r\n\r\n\tconst logsToShow = useMemo(() => {\r\n\t\tif (!displayState.consoleLogs) return t(\"chat:browser.noNewLogs\") as string\r\n\t\tif (logFilter === \"all\") return displayState.consoleLogs\r\n\t\tconst arr = parsedLogs.byType[logFilter]\r\n\t\treturn arr.length ? arr.join(\"\\n\") : (t(\"chat:browser.noNewLogs\") as string)\r\n\t}, [displayState.consoleLogs, logFilter, parsedLogs, t])\r\n\r\n\t// Meta for log badges (include \"All\" first)\r\n\tconst logTypeMeta = [\r\n\t\t{ key: \"all\", label: \"All\" },\r\n\t\t{ key: \"debug\", label: \"Debug\" },\r\n\t\t{ key: \"info\", label: \"Info\" },\r\n\t\t{ key: \"warn\", label: \"Warn\" },\r\n\t\t{ key: \"error\", label: \"Error\" },\r\n\t\t{ key: \"log\", label: \"Log\" },\r\n\t] as const\r\n\r\n\t// Use a fixed standard aspect ratio and dimensions for the drawer to prevent flickering\r\n\t// Even if viewport changes, the drawer maintains consistent size\r\n\tconst fixedDrawerWidth = 900\r\n\tconst fixedDrawerHeight = 600\r\n\tconst drawerAspectRatio = (fixedDrawerHeight / fixedDrawerWidth) * 100\r\n\r\n\t// For cursor positioning, use the viewport dimensions from the same page as the data we're displaying\r\n\t// This ensures cursor position matches the screenshot/mouse position being shown\r\n\tlet cursorViewportWidth: number\r\n\tlet cursorViewportHeight: number\r\n\r\n\tif (currentPage?.screenshot) {\r\n\t\t// Current page has screenshot - use its dimensions\r\n\t\tcursorViewportWidth = currentPage.viewportWidth ?? viewportWidth\r\n\t\tcursorViewportHeight = currentPage.viewportHeight ?? viewportHeight\r\n\t} else if (lastPageWithScreenshot) {\r\n\t\t// Using placeholder screenshot - use dimensions from that page\r\n\t\tcursorViewportWidth = lastPageWithScreenshot.viewportWidth ?? viewportWidth\r\n\t\tcursorViewportHeight = lastPageWithScreenshot.viewportHeight ?? viewportHeight\r\n\t} else {\r\n\t\t// No screenshot available - use default settings\r\n\t\tcursorViewportWidth = viewportWidth\r\n\t\tcursorViewportHeight = viewportHeight\r\n\t}\r\n\r\n\t// Get browser action for current page (now stored in pages array)\r\n\tconst currentPageAction = useMemo(() => {\r\n\t\treturn pages[currentPageIndex]?.action\r\n\t}, [pages, currentPageIndex])\r\n\r\n\t// Latest non-close browser_action for header summary (fallback)\r\n\r\n\tconst lastBrowserActionOverall = useMemo(() => {\r\n\t\tconst all = messages.filter((m) => m.say === \"browser_action\")\r\n\t\treturn all.at(-1)\r\n\t}, [messages])\r\n\r\n\t// Use actual Playwright session state from extension (not message parsing)\r\n\tconst isBrowserSessionOpen = isBrowserSessionActive\r\n\r\n\t// Check if a browser action is currently in flight (for spinner)\r\n\tconst isActionRunning = useMemo(() => {\r\n\t\tif (!lastBrowserActionOverall || isLastApiReqInterrupted) {\r\n\t\t\treturn false\r\n\t\t}\r\n\r\n\t\t// Find the last browser_action_result (including empty text) to detect completion\r\n\t\tconst lastBrowserActionResult = [...messages].reverse().find((m) => m.say === \"browser_action_result\")\r\n\r\n\t\tif (!lastBrowserActionResult) {\r\n\t\t\t// We have at least one action, but haven't seen any result yet\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\t// If the last action happened after the last result, it's still running\r\n\t\treturn lastBrowserActionOverall.ts > lastBrowserActionResult.ts\r\n\t}, [messages, lastBrowserActionOverall, isLastApiReqInterrupted])\r\n\r\n\t// Browser session drawer never auto-expands - user must manually toggle it\r\n\r\n\t// Calculate total API cost for the browser session\r\n\tconst totalApiCost = useMemo(() => {\r\n\t\tlet total = 0\r\n\t\tmessages.forEach((message) => {\r\n\t\t\tif (message.say === \"api_req_started\" && message.text) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst data = JSON.parse(message.text)\r\n\t\t\t\t\tif (data.cost && typeof data.cost === \"number\") {\r\n\t\t\t\t\t\ttotal += data.cost\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch {\r\n\t\t\t\t\t// Ignore parsing errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn total\r\n\t}, [messages])\r\n\r\n\t// Local size tracking without react-use to avoid timers after unmount in tests\r\n\tconst containerRef = useRef<HTMLDivElement>(null)\r\n\tconst [rowHeight, setRowHeight] = useState(0)\r\n\tuseEffect(() => {\r\n\t\tconst el = containerRef.current\r\n\t\tif (!el) return\r\n\t\tlet mounted = true\r\n\t\tconst setH = (h: number) => {\r\n\t\t\tif (mounted) setRowHeight(h)\r\n\t\t}\r\n\t\tconst ro =\r\n\t\t\ttypeof window !== \"undefined\" && \"ResizeObserver\" in window\r\n\t\t\t\t? new ResizeObserver((entries) => {\r\n\t\t\t\t\t\tconst entry = entries[0]\r\n\t\t\t\t\t\tsetH(entry?.contentRect?.height ?? el.getBoundingClientRect().height)\r\n\t\t\t\t\t})\r\n\t\t\t\t: null\r\n\t\t// initial\r\n\t\tsetH(el.getBoundingClientRect().height)\r\n\t\tif (ro) ro.observe(el)\r\n\t\treturn () => {\r\n\t\t\tmounted = false\r\n\t\t\tif (ro) ro.disconnect()\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst BrowserSessionHeader: React.FC = () => (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tgap: 8,\r\n\t\t\t\tmarginBottom: 0,\r\n\t\t\t\tuserSelect: \"none\",\r\n\t\t\t}}>\r\n\t\t\t{/* Globe icon - green when browser session is open */}\r\n\t\t\t<Globe\r\n\t\t\t\tclassName=\"w-4 h-4 shrink-0\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\topacity: 0.7,\r\n\t\t\t\t\tcolor: isBrowserSessionOpen ? \"#4ade80\" : undefined, // green-400 when session is open\r\n\t\t\t\t\tcursor: fullScreen ? \"default\" : \"pointer\",\r\n\t\t\t\t}}\r\n\t\t\t\taria-label=\"Browser interaction\"\r\n\t\t\t\t{...(fullScreen\r\n\t\t\t\t\t? {}\r\n\t\t\t\t\t: {\r\n\t\t\t\t\t\t\tonClick: () =>\r\n\t\t\t\t\t\t\t\tsetNextActionsExpanded((v) => {\r\n\t\t\t\t\t\t\t\t\tconst nv = !v\r\n\t\t\t\t\t\t\t\t\tonExpandChange?.(nv)\r\n\t\t\t\t\t\t\t\t\treturn nv\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t})}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Simple text: \"Browser Session\" with step counter */}\r\n\t\t\t<span\r\n\t\t\t\t{...(fullScreen\r\n\t\t\t\t\t? {}\r\n\t\t\t\t\t: {\r\n\t\t\t\t\t\t\tonClick: () =>\r\n\t\t\t\t\t\t\t\tsetNextActionsExpanded((v) => {\r\n\t\t\t\t\t\t\t\t\tconst nv = !v\r\n\t\t\t\t\t\t\t\t\tonExpandChange?.(nv)\r\n\t\t\t\t\t\t\t\t\treturn nv\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t})}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tflex: 1,\r\n\t\t\t\t\tfontSize: 13,\r\n\t\t\t\t\tfontWeight: 500,\r\n\t\t\t\t\tlineHeight: \"22px\",\r\n\t\t\t\t\tcolor: \"var(--vscode-editor-foreground)\",\r\n\t\t\t\t\tcursor: fullScreen ? \"default\" : \"pointer\",\r\n\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\tgap: 8,\r\n\t\t\t\t}}>\r\n\t\t\t\t{t(\"chat:browser.session\")}\r\n\t\t\t\t{isActionRunning && (\r\n\t\t\t\t\t<span className=\"ml-1 flex items-center\" aria-hidden=\"true\">\r\n\t\t\t\t\t\t<ProgressIndicator />\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{pages.length > 0 && (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfontSize: 11,\r\n\t\t\t\t\t\t\topacity: 0.6,\r\n\t\t\t\t\t\t\tfontWeight: 400,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{currentPageIndex + 1}/{pages.length}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* Inline action summary to the right, similar to ChatView */}\r\n\t\t\t\t<span\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"inline-flex\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\tgap: 6,\r\n\t\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\t\tcolor: \"var(--vscode-descriptionForeground)\",\r\n\t\t\t\t\t\tfontWeight: 400,\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\tconst action = currentPageAction\r\n\t\t\t\t\t\tconst pageSize = pages[currentPageIndex]?.size\r\n\t\t\t\t\t\tconst pageViewportWidth = pages[currentPageIndex]?.viewportWidth\r\n\t\t\t\t\t\tconst pageViewportHeight = pages[currentPageIndex]?.viewportHeight\r\n\t\t\t\t\t\tif (action) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{getActionIcon(action.action)}\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{getBrowserActionText(\r\n\t\t\t\t\t\t\t\t\t\t\tt,\r\n\t\t\t\t\t\t\t\t\t\t\taction.action,\r\n\t\t\t\t\t\t\t\t\t\t\taction.executedCoordinate,\r\n\t\t\t\t\t\t\t\t\t\t\taction.coordinate,\r\n\t\t\t\t\t\t\t\t\t\t\taction.text,\r\n\t\t\t\t\t\t\t\t\t\t\tpageSize,\r\n\t\t\t\t\t\t\t\t\t\t\tpageViewportWidth,\r\n\t\t\t\t\t\t\t\t\t\t\tpageViewportHeight,\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t} else if (initialUrl) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t{getActionIcon(\"launch\" as any)}\r\n\t\t\t\t\t\t\t\t\t<span>{getBrowserActionText(t, \"launch\", undefined, initialUrl, undefined)}</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null\r\n\t\t\t\t\t})()}\r\n\t\t\t\t</span>\r\n\t\t\t</span>\r\n\r\n\t\t\t{/* Right side: cost badge and chevron */}\r\n\t\t\t{totalApiCost > 0 && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"text-xs text-vscode-dropdown-foreground border-vscode-dropdown-border/50 border px-1.5 py-0.5 rounded-lg\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\topacity: 0.4,\r\n\t\t\t\t\t\theight: \"22px\",\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t${totalApiCost.toFixed(4)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Chevron toggle hidden in fullScreen */}\r\n\t\t\t{!fullScreen && (\r\n\t\t\t\t<span\r\n\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\tsetNextActionsExpanded((v) => {\r\n\t\t\t\t\t\t\tconst nv = !v\r\n\t\t\t\t\t\t\tonExpandChange?.(nv)\r\n\t\t\t\t\t\t\treturn nv\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclassName={`codicon ${nextActionsExpanded ? \"codicon-chevron-up\" : \"codicon-chevron-down\"}`}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfontSize: 13,\r\n\t\t\t\t\t\tfontWeight: 500,\r\n\t\t\t\t\t\tlineHeight: \"22px\",\r\n\t\t\t\t\t\tcolor: \"var(--vscode-editor-foreground)\",\r\n\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\ttransition: \"transform 150ms ease\",\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Kill browser button hidden from header in fullScreen; kept in toolbar */}\r\n\t\t\t{isBrowserSessionOpen && !fullScreen && (\r\n\t\t\t\t<StandardTooltip content=\"Disconnect session\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"ghost\"\r\n\t\t\t\t\t\tsize=\"icon\"\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\tvscode.postMessage({ type: \"killBrowserSession\" })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\taria-label=\"Disconnect session\">\r\n\t\t\t\t\t\t<OctagonX className=\"size-4\" />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</StandardTooltip>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst BrowserSessionDrawer: React.FC = () => {\r\n\t\tif (!nextActionsExpanded) return null\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmarginTop: fullScreen ? 0 : 6,\r\n\t\t\t\t\tbackground: \"var(--vscode-editor-background)\",\r\n\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\tborderRadius: fullScreen ? 0 : 6,\r\n\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\theight: fullScreen ? \"100%\" : undefined,\r\n\t\t\t\t\tdisplay: fullScreen ? \"flex\" : undefined,\r\n\t\t\t\t\tflexDirection: fullScreen ? \"column\" : undefined,\r\n\t\t\t\t}}>\r\n\t\t\t\t{/* Browser-like Toolbar */}\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tpadding: \"6px 8px\",\r\n\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\tgap: \"8px\",\r\n\t\t\t\t\t\tborderBottom: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\tbackground: \"var(--vscode-editor-background)\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{/* Go to beginning */}\r\n\t\t\t\t\t<StandardTooltip content=\"Go to beginning\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\thasUserNavigatedRef.current = true\r\n\t\t\t\t\t\t\t\tsetCurrentPageIndex(0)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={currentPageIndex === 0 || isBrowsing}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: currentPageIndex === 0 || isBrowsing ? \"not-allowed\" : \"pointer\",\r\n\t\t\t\t\t\t\t\topacity: currentPageIndex === 0 || isBrowsing ? 0.4 : 0.85,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Go to beginning\">\r\n\t\t\t\t\t\t\t<ChevronsLeft className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\r\n\t\t\t\t\t{/* Back */}\r\n\t\t\t\t\t<StandardTooltip content=\"Back\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\thasUserNavigatedRef.current = true\r\n\t\t\t\t\t\t\t\tsetCurrentPageIndex((i) => Math.max(0, i - 1))\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={currentPageIndex === 0 || isBrowsing}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: currentPageIndex === 0 || isBrowsing ? \"not-allowed\" : \"pointer\",\r\n\t\t\t\t\t\t\t\topacity: currentPageIndex === 0 || isBrowsing ? 0.4 : 0.85,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Back\">\r\n\t\t\t\t\t\t\t<ArrowLeft className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\r\n\t\t\t\t\t{/* Forward */}\r\n\t\t\t\t\t<StandardTooltip content=\"Forward\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\tconst nextIndex = Math.min(pages.length - 1, currentPageIndex + 1)\r\n\t\t\t\t\t\t\t\t// Reset user navigation flag if going to the last page\r\n\t\t\t\t\t\t\t\thasUserNavigatedRef.current = nextIndex !== pages.length - 1\r\n\t\t\t\t\t\t\t\tsetCurrentPageIndex(nextIndex)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={currentPageIndex === pages.length - 1 || isBrowsing}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: currentPageIndex === pages.length - 1 || isBrowsing ? \"not-allowed\" : \"pointer\",\r\n\t\t\t\t\t\t\t\topacity: currentPageIndex === pages.length - 1 || isBrowsing ? 0.4 : 0.85,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Forward\">\r\n\t\t\t\t\t\t\t<ArrowRight className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\r\n\t\t\t\t\t{/* Go to end */}\r\n\t\t\t\t\t<StandardTooltip content=\"Go to end\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\t// Reset user navigation flag since we're going to the most recent page\r\n\t\t\t\t\t\t\t\thasUserNavigatedRef.current = false\r\n\t\t\t\t\t\t\t\tsetCurrentPageIndex(pages.length - 1)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdisabled={currentPageIndex === pages.length - 1 || isBrowsing}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: currentPageIndex === pages.length - 1 || isBrowsing ? \"not-allowed\" : \"pointer\",\r\n\t\t\t\t\t\t\t\topacity: currentPageIndex === pages.length - 1 || isBrowsing ? 0.4 : 0.85,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Go to end\">\r\n\t\t\t\t\t\t\t<ChevronsRight className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\r\n\t\t\t\t\t{/* Address Bar */}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\trole=\"group\"\r\n\t\t\t\t\t\taria-label=\"Address bar\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tflex: 1,\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tgap: 8,\r\n\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\tborderRadius: 999,\r\n\t\t\t\t\t\t\tpadding: \"4px 10px\",\r\n\t\t\t\t\t\t\tbackground: \"var(--vscode-input-background)\",\r\n\t\t\t\t\t\t\tcolor: \"var(--vscode-descriptionForeground)\",\r\n\t\t\t\t\t\t\tminHeight: 26,\r\n\t\t\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Globe className=\"w-3 h-3 shrink-0 opacity-60\" />\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\t\t\t\tlineHeight: \"18px\",\r\n\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\r\n\t\t\t\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{displayState.url || \"about:blank\"}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t{/* Step counter removed */}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Kill (Disconnect) replaces Reload */}\r\n\t\t\t\t\t<StandardTooltip content=\"Disconnect session\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\tvscode.postMessage({ type: \"killBrowserSession\" })\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t\t\topacity: 0.85,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Disconnect session\">\r\n\t\t\t\t\t\t\t<OctagonX className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\r\n\t\t\t\t\t{/* Open External */}\r\n\t\t\t\t\t<StandardTooltip content=\"Open in external browser\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\tif (displayState.url) {\r\n\t\t\t\t\t\t\t\t\tvscode.postMessage({ type: \"openExternal\", url: displayState.url })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: displayState.url ? \"pointer\" : \"not-allowed\",\r\n\t\t\t\t\t\t\t\topacity: displayState.url ? 0.85 : 0.4,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Open external\"\r\n\t\t\t\t\t\t\tdisabled={!displayState.url}>\r\n\t\t\t\t\t\t\t<ExternalLink className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\r\n\t\t\t\t\t{/* Copy URL */}\r\n\t\t\t\t\t<StandardTooltip content=\"Copy URL\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={async (e) => {\r\n\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tawait navigator.clipboard.writeText(displayState.url || \"\")\r\n\t\t\t\t\t\t\t\t} catch {\r\n\t\t\t\t\t\t\t\t\t// ignore\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackground: \"none\",\r\n\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\tborderRadius: 4,\r\n\t\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t\t\topacity: 0.85,\r\n\t\t\t\t\t\t\t\tpadding: \"4px\",\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\taria-label=\"Copy URL\">\r\n\t\t\t\t\t\t\t<Copy className=\"w-4 h-4\" />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</StandardTooltip>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* Screenshot Area */}\r\n\t\t\t\t<div\r\n\t\t\t\t\tdata-testid=\"screenshot-container\"\r\n\t\t\t\t\tref={screenshotRef}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\tbackgroundColor: \"var(--vscode-input-background)\",\r\n\t\t\t\t\t\tborderBottom: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t...(fullScreen\r\n\t\t\t\t\t\t\t? { flex: 1, minHeight: 0 }\r\n\t\t\t\t\t\t\t: { paddingBottom: `${drawerAspectRatio.toFixed(2)}%` }),\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{displayState.screenshot ? (\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={displayState.screenshot}\r\n\t\t\t\t\t\t\talt={t(\"chat:browser.screenshot\")}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\t\tobjectFit: \"contain\",\r\n\t\t\t\t\t\t\t\tobjectPosition: \"top center\",\r\n\t\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tvscode.postMessage({\r\n\t\t\t\t\t\t\t\t\ttype: \"openImage\",\r\n\t\t\t\t\t\t\t\t\ttext: displayState.screenshot,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\ttop: \"50%\",\r\n\t\t\t\t\t\t\t\tleft: \"50%\",\r\n\t\t\t\t\t\t\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"codicon codicon-globe\"\r\n\t\t\t\t\t\t\t\tstyle={{ fontSize: \"80px\", color: \"var(--vscode-descriptionForeground)\" }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{displayState.mousePosition &&\r\n\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t// Use measured size if available; otherwise fall back to current client size so cursor remains visible\r\n\t\t\t\t\t\t\tconst containerW = sW || (screenshotRef.current?.clientWidth ?? 0)\r\n\t\t\t\t\t\t\tconst containerH = sH || (screenshotRef.current?.clientHeight ?? 0)\r\n\t\t\t\t\t\t\tif (containerW <= 0 || containerH <= 0) {\r\n\t\t\t\t\t\t\t\t// Minimal fallback to keep cursor visible before first measurement\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<BrowserCursor\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\t\ttop: `0px`,\r\n\t\t\t\t\t\t\t\t\t\t\tleft: `0px`,\r\n\t\t\t\t\t\t\t\t\t\t\tzIndex: 2,\r\n\t\t\t\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Compute displayed image box within the container for object-fit: contain; objectPosition: top center\r\n\t\t\t\t\t\t\tconst imgAspect = cursorViewportWidth / cursorViewportHeight\r\n\t\t\t\t\t\t\tconst containerAspect = containerW / containerH\r\n\t\t\t\t\t\t\tlet displayW = containerW\r\n\t\t\t\t\t\t\tlet displayH = containerH\r\n\t\t\t\t\t\t\tlet offsetX = 0\r\n\t\t\t\t\t\t\tlet offsetY = 0\r\n\t\t\t\t\t\t\tif (containerAspect > imgAspect) {\r\n\t\t\t\t\t\t\t\t// Full height, letterboxed left/right; top aligned\r\n\t\t\t\t\t\t\t\tdisplayH = containerH\r\n\t\t\t\t\t\t\t\tdisplayW = containerH * imgAspect\r\n\t\t\t\t\t\t\t\toffsetX = (containerW - displayW) / 2\r\n\t\t\t\t\t\t\t\toffsetY = 0\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// Full width, potential space below; top aligned\r\n\t\t\t\t\t\t\t\tdisplayW = containerW\r\n\t\t\t\t\t\t\t\tdisplayH = containerW / imgAspect\r\n\t\t\t\t\t\t\t\toffsetX = 0\r\n\t\t\t\t\t\t\t\toffsetY = 0\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Parse \"x,y\" or \"x,y@widthxheight\" for original basis\r\n\t\t\t\t\t\t\tconst m = /^\\s*(\\d+)\\s*,\\s*(\\d+)(?:\\s*@\\s*(\\d+)\\s*[x,]\\s*(\\d+))?\\s*$/.exec(\r\n\t\t\t\t\t\t\t\tdisplayState.mousePosition || \"\",\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tconst mx = parseInt(m?.[1] || \"0\", 10)\r\n\t\t\t\t\t\t\tconst my = parseInt(m?.[2] || \"0\", 10)\r\n\t\t\t\t\t\t\tconst baseW = m?.[3] ? parseInt(m[3], 10) : cursorViewportWidth\r\n\t\t\t\t\t\t\tconst baseH = m?.[4] ? parseInt(m[4], 10) : cursorViewportHeight\r\n\r\n\t\t\t\t\t\t\tconst leftPx = offsetX + (baseW > 0 ? (mx / baseW) * displayW : 0)\r\n\t\t\t\t\t\t\tconst topPx = offsetY + (baseH > 0 ? (my / baseH) * displayH : 0)\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<BrowserCursor\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\ttop: `${topPx}px`,\r\n\t\t\t\t\t\t\t\t\t\tleft: `${leftPx}px`,\r\n\t\t\t\t\t\t\t\t\t\tzIndex: 2,\r\n\t\t\t\t\t\t\t\t\t\tpointerEvents: \"none\",\r\n\t\t\t\t\t\t\t\t\t\ttransition: \"top 0.15s ease-out, left 0.15s ease-out\",\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})()}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Browser Action summary moved inline to header; row removed */}\r\n\r\n\t\t\t\t{/* Console Logs Section (collapsible, default collapsed) */}\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tpadding: \"8px 10px\",\r\n\t\t\t\t\t\t// Pin logs to bottom of the fullscreen drawer\r\n\t\t\t\t\t\tmarginTop: fullScreen ? \"auto\" : undefined,\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\tsetConsoleLogsExpanded((v) => !v)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"text-vscode-editor-foreground/70 hover:text-vscode-editor-foreground transition-colors\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tgap: \"8px\",\r\n\t\t\t\t\t\t\tmarginBottom: consoleLogsExpanded ? \"6px\" : 0,\r\n\t\t\t\t\t\t\tcursor: \"pointer\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<SquareTerminal className=\"w-3\" />\r\n\t\t\t\t\t\t<span className=\"text-xs\" style={{ fontWeight: 500 }}>\r\n\t\t\t\t\t\t\t{t(\"chat:browser.consoleLogs\")}\r\n\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t{/* Log type indicators */}\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t\t\tstyle={{ display: \"flex\", alignItems: \"center\", gap: 6, marginLeft: \"auto\" }}>\r\n\t\t\t\t\t\t\t{logTypeMeta.map(({ key, label }) => {\r\n\t\t\t\t\t\t\t\tconst isAll = key === \"all\"\r\n\t\t\t\t\t\t\t\tconst count = isAll\r\n\t\t\t\t\t\t\t\t\t? (Object.values(parsedLogs.counts) as number[]).reduce((a, b) => a + b, 0)\r\n\t\t\t\t\t\t\t\t\t: parsedLogs.counts[key as \"debug\" | \"info\" | \"warn\" | \"error\" | \"log\"]\r\n\t\t\t\t\t\t\t\tconst isActive = logFilter === (key as any)\r\n\t\t\t\t\t\t\t\tconst disabled = count === 0\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tkey={key}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetConsoleLogsExpanded(true)\r\n\t\t\t\t\t\t\t\t\t\t\tsetLogFilter(\r\n\t\t\t\t\t\t\t\t\t\t\t\tisAll\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"all\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (prev) => (prev === (key as any) ? \"all\" : (key as any)),\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\t\t\ttitle={`${label}: ${count}`}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tborder: \"1px solid var(--vscode-panel-border)\",\r\n\t\t\t\t\t\t\t\t\t\t\tborderRadius: 999,\r\n\t\t\t\t\t\t\t\t\t\t\tpadding: \"0 6px\",\r\n\t\t\t\t\t\t\t\t\t\t\theight: 18,\r\n\t\t\t\t\t\t\t\t\t\t\tlineHeight: \"16px\",\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: 10,\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"var(--vscode-foreground)\",\r\n\t\t\t\t\t\t\t\t\t\t\tbackground: isActive\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"var(--vscode-editor-selectionBackground)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"transparent\",\r\n\t\t\t\t\t\t\t\t\t\t\topacity: disabled ? 0.35 : 0.85,\r\n\t\t\t\t\t\t\t\t\t\t\tcursor: disabled ? \"not-allowed\" : \"pointer\",\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t{label}: {count}\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tonClick={() => setConsoleLogsExpanded((v) => !v)}\r\n\t\t\t\t\t\t\t\tclassName={`codicon codicon-chevron-${consoleLogsExpanded ? \"down\" : \"right\"}`}\r\n\t\t\t\t\t\t\t\tstyle={{ marginLeft: 6 }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{consoleLogsExpanded && (\r\n\t\t\t\t\t\t<div style={{ marginTop: \"6px\" }}>\r\n\t\t\t\t\t\t\t<CodeBlock source={logsToShow} language=\"shell\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst browserSessionRow = (\r\n\t\t<div\r\n\t\t\tref={containerRef}\r\n\t\t\tstyle={{\r\n\t\t\t\tpadding: \"6px 10px\",\r\n\t\t\t\tbackground: \"var(--vscode-editor-background,transparent)\",\r\n\t\t\t\theight: \"100%\",\r\n\t\t\t}}>\r\n\t\t\t<BrowserSessionHeader />\r\n\r\n\t\t\t{/* Expanded drawer content - inline/fullscreen */}\r\n\t\t\t<BrowserSessionDrawer />\r\n\t\t</div>\r\n\t)\r\n\r\n\t// Height change effect\r\n\tuseEffect(() => {\r\n\t\tconst isInitialRender = prevHeightRef.current === 0\r\n\t\tif (isLast && rowHeight !== 0 && rowHeight !== Infinity && rowHeight !== prevHeightRef.current) {\r\n\t\t\tif (!isInitialRender) {\r\n\t\t\t\tonHeightChange?.(rowHeight > prevHeightRef.current)\r\n\t\t\t}\r\n\t\t\tprevHeightRef.current = rowHeight\r\n\t\t}\r\n\t}, [rowHeight, isLast, onHeightChange])\r\n\r\n\treturn browserSessionRow\r\n}, deepEqual)\r\n\r\nconst BrowserCursor: React.FC<{ style?: React.CSSProperties }> = ({ style }) => {\r\n\tconst { t } = useTranslation()\r\n\t// (can't use svgs in vsc extensions)\r\n\tconst cursorBase64 =\r\n\t\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFaADAAQAAAABAAAAGAAAAADwi9a/AAADGElEQVQ4EZ2VbUiTURTH772be/PxZdsz3cZwC4RVaB8SAjMpxQwSWZbQG/TFkN7oW1Df+h6IRV9C+hCpKUSIZUXOfGM5tAKViijFFEyfZ7Ol29S1Pbdzl8Uw9+aBu91zzv3/nt17zt2DEZjBYOAkKrtFMXIghAWM8U2vMN/FctsxGRMpM7NbEEYNMM2CYUSInlJx3OpawO9i+XSNQYkmk2uFb9njzkcfVSr1p/GJiQKMULVaw2WuBv296UKRxWJR6wxGCmM1EAhSNppv33GBH9qI32cPTAtss9lUm6EM3N7R+RbigT+5/CeosFCZKpjEW+iorS1pb30wDUXzQfHqtD/9L3ieZ2ee1OJCmbL8QHnRs+4uj0wmW4QzrpCwvJ8zGg3JqAmhTLynuLiwv8/5KyND8Q3cEkUEDWu15oJE4KRQJt5hs1rcriGNRqP+DK4dyyWXXm/aFQ+cEpSJ8/LyDGPuEZNOmzsOroUSOqzXG/dtBU4ZysTZYKNut91sNo2Cq6cE9enz86s2g9OCMrFSqVC5hgb32u072W3jKMU90Hb1seC0oUwsB+t92bO/rKx0EFGkgFCnjjc1/gVvC8rE0L+4o63t4InjxwbAJQjTe3qD8QrLkXA4DC24fWtuajp06cLFYSBIFKGmXKPRRmAnME9sPt+yLwIWb9WN69fKoTneQz4Dh2mpPNkvfeV0jjecb9wNAkwIEVQq5VJOds4Kb+DXoAsiVquVwI1Dougpij6UyGYx+5cKroeDEFibm5lWRRMbH1+npmYrq6qhwlQHIbajZEf1fElcqGGFpGg9HMuKzpfBjhytCTMgkJ56RX09zy/ysENTBElmjIgJnmNChJqohDVQqpEfwkILE8v/o0GAnV9F1eEvofVQCbiTBEXOIPQh5PGgefDZeAcjrpGZjULBr/m3tZOnz7oEQWRAQZLjWlEU/XEJWySiILgRc5Cz1DkcAyuBFcnpfF0JiXWKpcolQXizhS5hKAqFpr0MVbgbuxJ6+5xX+P4wNpbqPPrugZfbmIbLmgQR3Aw8QSi66hUXulOFbF73GxqjE5BNXWNeAAAAAElFTkSuQmCC\"\r\n\r\n\treturn (\r\n\t\t<img\r\n\t\t\tsrc={cursorBase64}\r\n\t\t\tstyle={{\r\n\t\t\t\twidth: \"17px\",\r\n\t\t\t\theight: \"22px\",\r\n\t\t\t\t...style,\r\n\t\t\t}}\r\n\t\t\talt={t(\"chat:browser.cursor\")}\r\n\t\t\taria-label={t(\"chat:browser.cursor\")}\r\n\t\t/>\r\n\t)\r\n}\r\n\r\nexport default BrowserSessionRow\r\n",
    "import React, { createContext, useContext, useState, useEffect, useCallback } from \"react\"\r\nimport { ExtensionMessage } from \"@roo/ExtensionMessage\"\r\n\r\ninterface BrowserPanelState {\r\n\tbrowserViewportSize: string\r\n\tisBrowserSessionActive: boolean\r\n\tlanguage: string\r\n}\r\n\r\nconst BrowserPanelStateContext = createContext<BrowserPanelState | undefined>(undefined)\r\n\r\nexport const BrowserPanelStateProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n\tconst [state, setState] = useState<BrowserPanelState>({\r\n\t\tbrowserViewportSize: \"900x600\",\r\n\t\tisBrowserSessionActive: false,\r\n\t\tlanguage: \"en\",\r\n\t})\r\n\r\n\tconst handleMessage = useCallback((event: MessageEvent) => {\r\n\t\tconst message: ExtensionMessage = event.data\r\n\r\n\t\tswitch (message.type) {\r\n\t\t\tcase \"state\":\r\n\t\t\t\tif (message.state) {\r\n\t\t\t\t\tsetState((prev) => ({\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tbrowserViewportSize: message.state?.browserViewportSize || \"900x600\",\r\n\t\t\t\t\t\tisBrowserSessionActive: message.state?.isBrowserSessionActive || false,\r\n\t\t\t\t\t\tlanguage: message.state?.language || \"en\",\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase \"browserSessionUpdate\":\r\n\t\t\t\tif (message.isBrowserSessionActive !== undefined) {\r\n\t\t\t\t\tsetState((prev) => ({\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tisBrowserSessionActive: message.isBrowserSessionActive || false,\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener(\"message\", handleMessage)\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"message\", handleMessage)\r\n\t\t}\r\n\t}, [handleMessage])\r\n\r\n\treturn <BrowserPanelStateContext.Provider value={state}>{children}</BrowserPanelStateContext.Provider>\r\n}\r\n\r\nexport const useBrowserPanelState = () => {\r\n\tconst context = useContext(BrowserPanelStateContext)\r\n\tif (context === undefined) {\r\n\t\tthrow new Error(\"useBrowserPanelState must be used within a BrowserPanelStateProvider\")\r\n\t}\r\n\treturn context\r\n}\r\n",
    "import React, { useEffect, useState } from \"react\"\r\nimport { type ClineMessage } from \"@roo-code/types\"\r\nimport BrowserSessionRow from \"../chat/BrowserSessionRow\"\r\nimport { TooltipProvider } from \"@src/components/ui/tooltip\"\r\nimport ErrorBoundary from \"../ErrorBoundary\"\r\nimport TranslationProvider from \"@src/i18n/TranslationContext\"\r\nimport { ExtensionMessage } from \"@roo/ExtensionMessage\"\r\nimport { BrowserPanelStateProvider, useBrowserPanelState } from \"./BrowserPanelStateProvider\"\r\nimport { vscode } from \"@src/utils/vscode\"\r\nimport { ExtensionStateContextProvider } from \"@/context/ExtensionStateContext\"\r\n\r\ninterface BrowserSessionPanelState {\r\n\tmessages: ClineMessage[]\r\n}\r\n\r\nconst BrowserSessionPanelContent: React.FC = () => {\r\n\tconst { browserViewportSize, isBrowserSessionActive } = useBrowserPanelState()\r\n\tconst [state, setState] = useState<BrowserSessionPanelState>({\r\n\t\tmessages: [],\r\n\t})\r\n\t// Target page index to navigate BrowserSessionRow to\r\n\tconst [navigateToStepIndex, setNavigateToStepIndex] = useState<number | undefined>(undefined)\r\n\r\n\tconst [expandedRows, setExpandedRows] = useState<Record<number, boolean>>({})\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleMessage = (event: MessageEvent) => {\r\n\t\t\tconst message: ExtensionMessage = event.data\r\n\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase \"browserSessionUpdate\":\r\n\t\t\t\t\tif (message.browserSessionMessages) {\r\n\t\t\t\t\t\tsetState((prev) => ({\r\n\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\tmessages: message.browserSessionMessages || [],\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase \"browserSessionNavigate\":\r\n\t\t\t\t\tif (typeof message.stepIndex === \"number\" && message.stepIndex >= 0) {\r\n\t\t\t\t\t\tsetNavigateToStepIndex(message.stepIndex)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"message\", handleMessage)\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener(\"message\", handleMessage)\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<div className=\"fixed top-0 left-0 right-0 bottom-0 flex flex-col overflow-hidden bg-vscode-editor-background\">\r\n\t\t\t<BrowserSessionRow\r\n\t\t\t\tmessages={state.messages}\r\n\t\t\t\tisLast={true}\r\n\t\t\t\tlastModifiedMessage={state.messages.at(-1)}\r\n\t\t\t\tisStreaming={false}\r\n\t\t\t\tisExpanded={(messageTs: number) => expandedRows[messageTs] ?? false}\r\n\t\t\t\tonToggleExpand={(messageTs: number) => {\r\n\t\t\t\t\tsetExpandedRows((prev: Record<number, boolean>) => ({\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t[messageTs]: !prev[messageTs],\r\n\t\t\t\t\t}))\r\n\t\t\t\t}}\r\n\t\t\t\tfullScreen={true}\r\n\t\t\t\tbrowserViewportSizeProp={browserViewportSize}\r\n\t\t\t\tisBrowserSessionActiveProp={isBrowserSessionActive}\r\n\t\t\t\tnavigateToPageIndex={navigateToStepIndex}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst BrowserSessionPanel: React.FC = () => {\r\n\t// Ensure the panel receives initial state and becomes \"ready\" without needing a second click\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\tvscode.postMessage({ type: \"webviewDidLaunch\" })\r\n\t\t} catch {\r\n\t\t\t// Ignore errors during initial launch\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn (\r\n\t\t<ErrorBoundary>\r\n\t\t\t<ExtensionStateContextProvider>\r\n\t\t\t\t<TooltipProvider>\r\n\t\t\t\t\t<TranslationProvider>\r\n\t\t\t\t\t\t<BrowserPanelStateProvider>\r\n\t\t\t\t\t\t\t<BrowserSessionPanelContent />\r\n\t\t\t\t\t\t</BrowserPanelStateProvider>\r\n\t\t\t\t\t</TranslationProvider>\r\n\t\t\t\t</TooltipProvider>\r\n\t\t\t</ExtensionStateContextProvider>\r\n\t\t</ErrorBoundary>\r\n\t)\r\n}\r\n\r\nexport default BrowserSessionPanel\r\n",
    "import { StrictMode } from \"react\"\r\nimport { createRoot } from \"react-dom/client\"\r\n\r\nimport \"./index.css\"\r\nimport BrowserSessionPanel from \"./components/browser-session/BrowserSessionPanel\"\r\nimport \"../node_modules/@vscode/codicons/dist/codicon.css\"\r\n\r\ncreateRoot(document.getElementById(\"root\")!).render(\r\n\t<StrictMode>\r\n\t\t<BrowserSessionPanel />\r\n\t</StrictMode>,\r\n)\r\n"
  ],
  "names": [
    "__iconNode",
    "ArrowLeft",
    "createLucideIcon",
    "ChevronsLeft",
    "ChevronsRight",
    "ExternalLink",
    "getBrowserActionText",
    "t",
    "action",
    "executedCoordinate",
    "coordinate",
    "text",
    "size",
    "viewportWidth",
    "viewportHeight",
    "getViewportCoordinate",
    "coord",
    "getViewportCoordinateShared",
    "prettyKey",
    "getActionIcon",
    "jsx",
    "MousePointerIcon",
    "Keyboard",
    "ArrowDown",
    "ArrowUp",
    "Play",
    "Check",
    "Maximize2",
    "Camera",
    "Pointer",
    "BrowserSessionRow",
    "memo",
    "props",
    "messages",
    "isLast",
    "onHeightChange",
    "lastModifiedMessage",
    "onExpandChange",
    "fullScreen",
    "useTranslation",
    "prevHeightRef",
    "useRef",
    "consoleLogsExpanded",
    "setConsoleLogsExpanded",
    "useState",
    "nextActionsExpanded",
    "setNextActionsExpanded",
    "logFilter",
    "setLogFilter",
    "screenshotRef",
    "sW",
    "setSW",
    "sH",
    "setSH",
    "useEffect",
    "el",
    "update",
    "r",
    "ro",
    "browserViewportSize",
    "isBrowserSessionActive",
    "extensionState",
    "useExtensionState",
    "defaultMousePosition",
    "isLastApiReqInterrupted",
    "useMemo",
    "lastApiReqStarted",
    "m",
    "info",
    "isBrowsing",
    "pages",
    "result",
    "message",
    "resultMessage",
    "resultData",
    "currentPageIndex",
    "setCurrentPageIndex",
    "hasUserNavigatedRef",
    "didInitIndexRef",
    "prevPagesLengthRef",
    "prevNavigateToPageIndexRef",
    "idx",
    "initialUrl",
    "launchMessage",
    "currentPage",
    "lastPageWithScreenshot",
    "i",
    "lastPageWithMousePositionUpToCurrent",
    "displayState",
    "parsedLogs",
    "counts",
    "byType",
    "line",
    "trimmed",
    "type",
    "logsToShow",
    "arr",
    "logTypeMeta",
    "drawerAspectRatio",
    "cursorViewportWidth",
    "cursorViewportHeight",
    "currentPageAction",
    "_a",
    "lastBrowserActionOverall",
    "isBrowserSessionOpen",
    "isActionRunning",
    "lastBrowserActionResult",
    "totalApiCost",
    "total",
    "data",
    "containerRef",
    "rowHeight",
    "setRowHeight",
    "mounted",
    "setH",
    "h",
    "entries",
    "entry",
    "BrowserSessionHeader",
    "jsxs",
    "Globe",
    "v",
    "nv",
    "ProgressIndicator",
    "pageSize",
    "pageViewportWidth",
    "_b",
    "pageViewportHeight",
    "_c",
    "Fragment",
    "StandardTooltip",
    "Button",
    "vscode",
    "OctagonX",
    "BrowserSessionDrawer",
    "nextIndex",
    "ArrowRight",
    "Copy",
    "containerW",
    "containerH",
    "BrowserCursor",
    "imgAspect",
    "containerAspect",
    "displayW",
    "displayH",
    "offsetX",
    "offsetY",
    "mx",
    "my",
    "baseW",
    "baseH",
    "leftPx",
    "topPx",
    "SquareTerminal",
    "key",
    "label",
    "isAll",
    "count",
    "a",
    "b",
    "isActive",
    "disabled",
    "prev",
    "CodeBlock",
    "browserSessionRow",
    "isInitialRender",
    "deepEqual",
    "style",
    "BrowserPanelStateContext",
    "createContext",
    "BrowserPanelStateProvider",
    "children",
    "state",
    "setState",
    "handleMessage",
    "useCallback",
    "event",
    "useBrowserPanelState",
    "context",
    "useContext",
    "BrowserSessionPanelContent",
    "navigateToStepIndex",
    "setNavigateToStepIndex",
    "expandedRows",
    "setExpandedRows",
    "messageTs",
    "BrowserSessionPanel",
    "ErrorBoundary",
    "ExtensionStateContextProvider",
    "TooltipProvider",
    "TranslationProvider",
    "createRoot",
    "StrictMode"
  ],
  "mappings": "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",
  "x_google_ignoreList": [
    0,
    1,
    2,
    3
  ],
  "sourceRoot": ""
}